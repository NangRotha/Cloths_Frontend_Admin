{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = 'http://localhost:8000';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  withCredentials: false // Important for CORS\n});\n\n// Add token to requests if available\napi.interceptors.request.use(config => {\n  var _config$method;\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  console.log('API Request:', (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(), config.url, config.headers);\n  return config;\n});\n\n// Add response interceptor for debugging\napi.interceptors.response.use(response => {\n  var _response$config$meth;\n  console.log('API Response:', (_response$config$meth = response.config.method) === null || _response$config$meth === void 0 ? void 0 : _response$config$meth.toUpperCase(), response.config.url, response.status);\n  return response;\n}, error => {\n  var _error$config, _error$config$method, _error$config2, _error$response, _error$response2, _error$response3;\n  console.error('API Error:', (_error$config = error.config) === null || _error$config === void 0 ? void 0 : (_error$config$method = _error$config.method) === null || _error$config$method === void 0 ? void 0 : _error$config$method.toUpperCase(), (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.url, (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status, error.message);\n  console.error('Error details:', (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n\n  // Handle specific errors\n  if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 401) {\n    localStorage.removeItem('token');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\nexport const authAPI = {\n  login: credentials => {\n    const params = new URLSearchParams();\n    params.append('username', credentials.username);\n    params.append('password', credentials.password);\n    return api.post('/api/auth/login', params, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    });\n  },\n  register: userData => api.post('/api/auth/register', userData),\n  getProfile: () => api.get('/api/auth/me')\n};\nexport const productsAPI = {\n  getProducts: () => {\n    console.log('Fetching products from:', `${API_BASE_URL}/api/products/`);\n    return api.get('/api/products/');\n  },\n  getProduct: id => api.get(`/api/products/${id}/`),\n  createProduct: data => api.post('/api/products/', data),\n  updateProduct: (id, data) => api.put(`/api/products/${id}/`, data),\n  deleteProduct: id => api.delete(`/api/products/${id}/`),\n  uploadImage: (id, file) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    return api.post(`/api/products/${id}/upload-image`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  }\n};\nexport const ordersAPI = {\n  getOrders: () => {\n    console.log('Fetching orders from:', `${API_BASE_URL}/api/orders/`);\n    return api.get('/api/orders/');\n  },\n  getOrder: id => api.get(`/api/orders/${id}/`),\n  updateOrderStatus: (id, data) => api.put(`/api/orders/${id}/`, data)\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","headers","withCredentials","interceptors","request","use","config","_config$method","token","localStorage","getItem","Authorization","console","log","method","toUpperCase","url","response","_response$config$meth","status","error","_error$config","_error$config$method","_error$config2","_error$response","_error$response2","_error$response3","message","data","removeItem","window","location","href","Promise","reject","authAPI","login","credentials","params","URLSearchParams","append","username","password","post","register","userData","getProfile","get","productsAPI","getProducts","getProduct","id","createProduct","updateProduct","put","deleteProduct","delete","uploadImage","file","formData","FormData","ordersAPI","getOrders","getOrder","updateOrderStatus"],"sources":["/Users/rotha/Documents/Project /Cloth/frontend-admin/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:8000';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  withCredentials: false, // Important for CORS\n});\n\n// Add token to requests if available\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  console.log('API Request:', config.method?.toUpperCase(), config.url, config.headers);\n  return config;\n});\n\n// Add response interceptor for debugging\napi.interceptors.response.use(\n  (response) => {\n    console.log('API Response:', response.config.method?.toUpperCase(), response.config.url, response.status);\n    return response;\n  },\n  (error) => {\n    console.error('API Error:', error.config?.method?.toUpperCase(), error.config?.url, error.response?.status, error.message);\n    console.error('Error details:', error.response?.data);\n    \n    // Handle specific errors\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  login: (credentials) => {\n    const params = new URLSearchParams();\n    params.append('username', credentials.username);\n    params.append('password', credentials.password);\n    return api.post('/api/auth/login', params, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    });\n  },\n  register: (userData) => api.post('/api/auth/register', userData),\n  getProfile: () => api.get('/api/auth/me'),\n};\n\nexport const productsAPI = {\n  getProducts: () => {\n    console.log('Fetching products from:', `${API_BASE_URL}/api/products/`);\n    return api.get('/api/products/');\n  },\n  getProduct: (id) => api.get(`/api/products/${id}/`),\n  createProduct: (data) => api.post('/api/products/', data),\n  updateProduct: (id, data) => api.put(`/api/products/${id}/`, data),\n  deleteProduct: (id) => api.delete(`/api/products/${id}/`),\n  uploadImage: (id, file) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    return api.post(`/api/products/${id}/upload-image`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data',\n      },\n    });\n  },\n};\n\nexport const ordersAPI = {\n  getOrders: () => {\n    console.log('Fetching orders from:', `${API_BASE_URL}/api/orders/`);\n    return api.get('/api/orders/');\n  },\n  getOrder: (id) => api.get(`/api/orders/${id}/`),\n  updateOrderStatus: (id, data) => api.put(`/api/orders/${id}/`, data),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}